OMTS - 土壌湿度センサー使ったオムツセンサー

■ミッション要求・機能要求

・MR-1：コトが起きてから、30秒以内（理想は20秒以内）に、
        かけつけられるように、アラートを出したい。（ブザーかLED点滅）
・MR-2：感度調整機能がほしい
・リセット機能は？→センサーを外すことで対応してもらう。（要求としない）

・非機能要求
  ・単３乾電池３本で、１日約８時間以上駆動（目標は２本）。
  ・タバコ箱程度の大きさに納めたい
  ・センサーは養生テープで貼り付けて再使用


■I/F仕様案

・SR-1: LEDで知らせる
  ・wet     赤LEDで点滅（1秒間隔）
  ・humid   無し
  ・dry     無し

・SR-2: ブザーで知らせる。「ピーッ、ピーッ、ピーッ」。

・SR-3: IFTTT経由でLINEグループに知らせる
  ・wet     [IFTTT] 濡れています（センサ値：xxx）
//  ・humid   [IFTTT] ちょうど良い（センサ値：xxx）
//  ・dry     [IFTTT] 乾いています（センサ値：xxx）

・SR-4: Blynk経由で感度調整させる


=================================

■端末HW設計仕様

・基盤部：ブレッドボードと単３電池ケースの組合せ。
          ESP-WROOM-02開発ボードを取付け。

・電源部：昇圧型DC/DCコンバータで5Vにし、LDOで3.3Vに降圧する。★
  電池３本が前提だが２本目標。

・センサ部：土壌湿度センサーそのまま使う


■端末SW設計仕様

・センサ読み取り頻度：２秒に１回。
  ただし感度にバラツキがあるので、
  100msec単位で3回計測して平均値を返すようにすると良いかも。★tbd

・センサ感度判定：センサ製品仕様通り、
  ・0-300:    dry
  ・300-700:  humid
  ・700-1024: wet

・通知機能：
  wetを感知したら直ちに、LED点滅とブザー鳴動。
  LEDは、対応までは点滅継続、
  ブザーは、対応まで30秒に一回鳴動。
  対応は、リセットボタン押しか、センサ値がdry/humidになるまで。

・長時間駆動：Deepsleepをちゃんと使う。


・Wifi送信：第１版からは外す。
  毎回Wifi接続すると電池を食うので、試験した上で、間欠送信とするか検討。★


■リモート側SW設計仕様（第２版以降）

・Wifiを使うか？
  →Wifi環境が繁ケータイのテザリング機能しかないので、
  いったんpendingとする。

・感度調整機能：Wifi使える前提で、
  Blynkのスライダーと、端末側SWで BLYNK_WRITE() 機能を使う。

・IFTTT側の設定：以下のJSONをPOSTするI/F。
  { "status": "濡れています", "value":  "0-1024の値" }



以上
